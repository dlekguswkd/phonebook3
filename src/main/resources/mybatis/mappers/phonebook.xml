<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="phonebook">
	<!-- 쿼리문작성 -->
	<!-- id=“식별자“ parameterType=“기본자료형 또는 vo” CDATA는 여기부터 여기까지가 쿼리라는뜻 혹시 부등호> 할때 오류나는걸 잡는것 select문만 parameterType이 아닌 resultType이 와야함 (rs 떄문) -->

	<!-- 삭제 -->
	<delete id="delete" parameterType="int">
		<![CDATA[
			delete from person
			where person_id = #{personId}
		]]>
	</delete>


	<!-- 저장 -->
	<insert id="insert" parameterType="com.javaex.vo.PersonVo">
		<![CDATA[
			insert into person
			values(null, #{name}, #{hp}, #{company})
		]]>
	</insert>


	<!-- 전체 가져오기 (리스트) -->
	<!-- as personId 해주는 이유는 생성자에 set은 저 이름으로 되어있기 때문에 별명을 붙여줘서 찾을수있게 해주는것 -->
	<select id="selectList" resultType="com.javaex.vo.PersonVo">
		<![CDATA[
			select person_id as personId, 
				   name,
                   hp,
                   company
			from person
		]]>
	</select>


	<!-- 1개 가져오기 (수정폼) -->
	<select id="selectOne" parameterType="int" resultType="com.javaex.vo.PersonVo">
		<![CDATA[
			select person_id as personId,
     			   name,
        		   hp,
        		   company
			from person
			where person_id = #{no}
		]]>
	</select>
	
	<!--사람 정보 수정하기 1명 (수정) -->
	<update id="update" parameterType="com.javaex.vo.PersonVo">
		<![CDATA[
			update person 
 			set name = #{name},
				hp = #{hp},
				company = #{company} 
			where person_id = #{personId}
		]]>
	</update>



</mapper>